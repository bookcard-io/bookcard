# =============================================================================
# Bookcard - Environment Configuration Example
# =============================================================================
#
# This file contains example environment variables for Bookcard.
#
# QUICK START:
#   1. Copy this file to .env:  cp .env.example .env
#   2. Review and update the REQUIRED settings below (marked with ⚠️)
#   3. Optionally configure PostgreSQL, Redis, or other advanced settings
#   4. Start the application: docker-compose up -d
#
# SECURITY WARNING:
#   - Change all default passwords and secrets before deploying to production
#   - Never commit your .env file to version control
#   - The default values here are for development/testing only
#
# =============================================================================


# =============================================================================
# ⚠️ REQUIRED: Admin Account Setup
# =============================================================================
# These are the credentials for your initial admin account.
# You'll use these to log into the Bookcard web interface.
#
# IMPORTANT: Change these from the defaults before deploying!
ADMIN_USERNAME=admin
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=admin123


# =============================================================================
# ⚠️ REQUIRED: Security Keys
# =============================================================================
# These keys are used to encrypt sensitive data and sign authentication tokens.
# You MUST change these from the defaults for any production deployment.

# JWT Secret: Used to sign authentication tokens
# Generate a secure random string (at least 32 characters recommended)
BOOKCARD_JWT_SECRET=bmTGcCnA3HTXyQBUkwC7

# Fernet Key: Used to encrypt user-provided passwords and tokens
# Generate a key from: https://fernet.utils.com/
# Or run: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
BOOKCARD_FERNET_KEY=EifxhGYj-u0JolSrDhBLqyIZSnoZCVKOAFQbuv70T08=


# =============================================================================
# Optional: External Service Integrations
# =============================================================================

# Hardcover API Token (optional)
# Get your token at: https://docs.hardcover.app/api/getting-started/
# Format: 'Bearer YOUR_TOKEN_HERE'
HARDCOVER_API_TOKEN=Bearer abc123


# =============================================================================
# Optional: User/Group IDs (Linux only)
# =============================================================================
# These control which user/group the container runs as.
# Only needed if you want to match your host system's user/group IDs.
# Default: 1000 (typical for first user on Linux systems)
#
# To find your IDs, run: id
#   - UID is your user ID
#   - GID is your primary group ID
PGID=1000
PUID=1000


# =============================================================================
# Optional: Database Configuration
# =============================================================================
# By default, Bookcard uses SQLite (no configuration needed).
# To use PostgreSQL instead, uncomment and configure the settings below.

# PostgreSQL Connection String
# Format: postgresql+psycopg://USER:PASSWORD@HOST:PORT/DATABASE
# Leave empty to use SQLite (default)
# BOOKCARD_DATABASE_URL=postgresql+psycopg://admin:admin123@postgres:5432/bookcard

# PostgreSQL Database Settings (only needed if using PostgreSQL)
# These match the postgres service in docker-compose.yaml
POSTGRES_USER=admin
POSTGRES_PASSWORD=admin123
POSTGRES_DB=bookcard


# =============================================================================
# Optional: Redis Configuration
# =============================================================================
# Redis is used for distributed workers and library scanning features.
# The application will work without Redis, but some features will be disabled.
#
# To disable Redis: Set ENABLE_REDIS=false
# To use Redis: Ensure the redis service is running in docker-compose

ENABLE_REDIS=true
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=


# =============================================================================
# Optional: OIDC (SSO) Authentication
# =============================================================================
# Enables login via an external OpenID Connect provider (SSO).
#
# When enabled:
# - The backend exposes /auth/oidc/login and /auth/oidc/callback
# - The frontend shows a “Sign in with SSO” button and uses /api/auth/oidc/*
# - Local username/password login & registration are disabled by default

OIDC_ENABLED=false

# OIDC issuer URL (used for discovery via {issuer}/.well-known/openid-configuration)
OIDC_ISSUER=

# OIDC client credentials configured in your provider
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=

# Requested scopes during login (space-separated)
OIDC_SCOPES=openid profile email


# =============================================================================
# Advanced: Backend Settings
# =============================================================================
# These settings typically don't need to be changed unless you have specific requirements.

# JWT Algorithm: Algorithm used for signing tokens (default: HS256)
BOOKCARD_JWT_ALG=HS256

# JWT Expiration: Token expiration time in minutes (default: 131400 = ~3 months)
BOOKCARD_JWT_EXPIRES_MIN=131400

# Alembic: Enable database migrations (default: true)
# Set to false only if you're managing migrations manually
BOOKCARD_ALEMBIC_ENABLED=true


# =============================================================================
# Advanced: Frontend Configuration
# =============================================================================
# These settings are typically only needed for development or custom deployments.

# Node Environment: Set to 'production' for production builds
NODE_ENV=production

# Disable Next.js telemetry
NEXT_TELEMETRY_DISABLED=1

# NPM log level: warn, error, or silent
NPM_CONFIG_LOGLEVEL=warn

# Frontend port (default: 3000)
PORT=3000

# Backend API URL
# - For docker-compose.yaml (single container): http://localhost:8000
# - For docker-compose.dev.yaml (separate containers): http://bookcard-backend:8000
BACKEND_URL=http://localhost:8000
