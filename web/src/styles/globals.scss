/* Copyright (C) 2025 knguyen and others
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

@use "colors" as *;
@use "typography" as *;
@use "tailwindcss";

/* Default dark theme - applied when data-theme="dark" or no attribute */
@theme {
  /* Primary colors (dark theme) */
  --color-primary-a0: #90aaf9;
  --color-primary-a10: #9eb3fa;
  --color-primary-a20: #abbcfb;
  --color-primary-a30: #b7c5fc;
  --color-primary-a40: #c4cffc;
  --color-primary-a50: #d0d8fd;

  /* Text colors (dark theme) */
  --color-text-a0: #ffffff;
  --color-text-a10: #e4e4e4;
  --color-text-a20: #d7d7d7;
  --color-text-a30: #cacaca;
  --color-text-a40: #bdbdbd;
  --color-text-a50: #b1b1b1;

  /* Surface colors (dark theme) */
  --color-surface-a0: #0b0e14;
  --color-surface-a10: #232529;
  --color-surface-a20: #3a3c40;
  --color-surface-a30: #535558;
  --color-surface-a40: #6d6f72;
  --color-surface-a50: #888a8c;

  /* Surface tonal colors (dark theme) */
  --color-surface-tonal-a0: #191d27;
  --color-surface-tonal-a10: #2e323b;
  --color-surface-tonal-a20: #454851;
  --color-surface-tonal-a30: #5d5f67;
  --color-surface-tonal-a40: #76787f;
  --color-surface-tonal-a50: #909197;

  /* Semantic colors (dark theme) */
  --color-success-a0: #22946e;
  --color-success-a10: #47d5a6;
  --color-success-a20: #9ae8ce;

  --color-warning-a0: #a87a2a;
  --color-warning-a10: #d7ac61;
  --color-warning-a20: #ecd7b2;

  --color-danger-a-1: #7a1a1a;
  --color-danger-a0: #9c2121;
  --color-danger-a10: #d94a4a;
  --color-danger-a20: #eb9e9e;

  --color-info-a0: #21498a;
  --color-info-a10: #4077d1;
  --color-info-a20: #92b2e5;

  /* Custom box shadows */
  --shadow-focus-ring: 0 0 0 3px rgba(144, 170, 249, 0.3);
  --shadow-focus-ring-danger: 0 0 0 3px rgba(156, 33, 33, 0.1);
  --shadow-primary-glow: 0 0 0 2px rgba(144, 170, 249, 0.2);
  --shadow-warning-glow: 0 0 20px rgba(215, 172, 97, 0.6);
  --shadow-card-hover: 0 4px 12px rgba(0, 0, 0, 0.3);

  /* Layout dimensions */
  --sidebar-width: 250px;

  /* Base colors */
  --clr-dark-a0: #000000;
  --clr-light-a0: #ffffff;

  /* Primary button text color */
  --color-text-primary-a0: #131620;

  /* Legacy light theme variables (for backward compatibility) */
  --clr-primary-a0: #90aaf9;
  --clr-primary-a10: #7f95da;
  --clr-primary-a20: #6f81bc;
  --clr-primary-a30: #5f6e9f;
  --clr-primary-a40: #4f5b82;
  --clr-primary-a50: #404967;

  --clr-surface-a0: #ffffff;
  --clr-surface-a10: #f0f0f0;
  --clr-surface-a20: #e1e1e1;
  --clr-surface-a30: #d3d3d3;
  --clr-surface-a40: #c5c5c5;
  --clr-surface-a50: #b6b6b6;

  --clr-surface-tonal-a0: #f5f6ff;
  --clr-surface-tonal-a10: #e7e8f0;
  --clr-surface-tonal-a20: #dadbe1;
  --clr-surface-tonal-a30: #cccdd3;
  --clr-surface-tonal-a40: #bfc0c5;
  --clr-surface-tonal-a50: #b2b3b6;

  --clr-success-a0: #1b7f5c;
  --clr-success-a10: #28be8a;
  --clr-success-a20: #58dbad;

  --clr-warning-a0: #b8871f;
  --clr-warning-a10: #dfae44;
  --clr-warning-a20: #ebca85;

  --clr-danger-a0: #b13535;
  --clr-danger-a10: #d06262;
  --clr-danger-a20: #e29d9d;

  --clr-info-a0: #1e56a3;
  --clr-info-a10: #347ada;
  --clr-info-a20: #74a4e6;
}

@layer components {
  .btn-tonal {
    @apply rounded-md border border-surface-a20 bg-surface-tonal-a10 text-sm text-text-a0 transition-[background-color,border-color] duration-200 hover:border-surface-a30 hover:bg-surface-tonal-a20 active:bg-surface-tonal-a30 focus-visible:outline-2 focus-visible:outline-primary-a0 focus-visible:outline-offset-2 focus:not-focus-visible:outline-none focus:outline-none;
  }

  .input-tonal {
    @apply h-9 w-full rounded-md border border-surface-a20 bg-surface-tonal-a10 text-sm text-text-a0 transition-[border-color,background-color] duration-200 placeholder:text-text-a40 hover:border-surface-a30 focus:border-primary-a0 focus:bg-surface-tonal-a0 focus:outline-none;
  }

  .panel-tonal {
    @apply border border-surface-a20 bg-surface-tonal-a10;
  }

  .menu-item-tonal {
    @apply text-text-a0 transition-[background-color,color] duration-150 hover:bg-surface-tonal-a20 active:bg-surface-tonal-a30;
  }

  /* Modal overlay base styles */
  .modal-overlay {
    @apply fixed inset-0 flex items-center justify-center overflow-y-auto bg-black/70 animate-[fadeIn_0.2s_ease-out];
  }

  /* Modal overlay z-index variants */
  .modal-overlay-z-50 {
    @apply z-50;
  }

  .modal-overlay-z-1000 {
    @apply z-[1000];
  }

  .modal-overlay-z-1002 {
    @apply z-[1002];
  }

  /* Modal overlay padding variants */
  .modal-overlay-padding {
    @apply p-4;
  }

  .modal-overlay-padding-responsive {
    @apply p-4 md:p-2;
  }

  /* Modal container base styles */
  .modal-container {
    @apply relative flex flex-col overflow-y-auto rounded-md bg-surface-a10 animate-[slideUp_0.3s_ease-out];
  }

  /* Modal container shadow variants */
  .modal-container-shadow-default {
    @apply shadow-[var(--shadow-card-hover)];
  }

  .modal-container-shadow-large {
    @apply shadow-[0_20px_60px_rgba(0,0,0,0.5)];
  }

  /* Modal close button base styles */
  .modal-close-button {
    @apply absolute top-4 right-4 z-10 flex h-10 w-10 items-center justify-center rounded-md border-none bg-transparent leading-none transition-colors duration-200 hover:bg-surface-a20 hover:text-text-a0 focus:outline-2 focus:outline-[var(--color-primary-a0)] focus:outline-offset-2;
  }

  /* Modal close button size variants */
  .modal-close-button-sm {
    @apply p-0 text-2xl text-text-a30;
  }

  .modal-close-button-md {
    @apply p-2 text-2xl text-text-a30;
  }

  .modal-close-button-lg {
    @apply p-2 text-3xl text-text-a30;
  }

  .modal-close-button-xl {
    @apply p-2 text-[2rem] text-text-a30;
  }

  /* Modal footer with justify-between */
  .modal-footer-between {
    @apply flex flex-col gap-4 border-surface-a20 border-t bg-surface-tonal-a10 md:flex-row md:items-center md:justify-between md:gap-4 md:px-4 md:pt-4 md:pb-4;
  }

  /* Modal footer with justify-end */
  .modal-footer-end {
    @apply flex flex-col gap-4 border-surface-a20 border-t bg-surface-tonal-a10 p-4 md:flex-row md:items-center md:justify-end md:gap-4 md:px-4 md:pt-4 md:pb-4;
  }

  /* Modal header base styles */
  .modal-header {
    @apply flex items-start justify-between gap-4 border-surface-a20 border-b pt-4 pr-16 pb-4 pl-4;
  }
}

/* Light theme - applied when data-theme="light" */
html[data-theme="light"] {
  /* Primary colors (light theme) */
  --color-primary-a0: #90aaf9;
  --color-primary-a10: #7f95da;
  --color-primary-a20: #6f81bc;
  --color-primary-a30: #5f6e9f;
  --color-primary-a40: #4f5b82;
  --color-primary-a50: #404967;

  /* Text colors (light theme) */
  --color-text-a0: #000000;
  --color-text-a10: #1a1a1a;
  --color-text-a20: #333333;
  --color-text-a30: #4d4d4d;
  --color-text-a40: #666666;
  --color-text-a50: #808080;

  /* Surface colors (light theme) */
  --color-surface-a0: #f1f1f1;
  --color-surface-a10: #e4e4e4;
  --color-surface-a20: #d7d7d7;
  --color-surface-a30: #cacaca;
  --color-surface-a40: #bdbdbd;
  --color-surface-a50: #b1b1b1;

  /* Surface tonal colors (light theme) */
  --color-surface-tonal-a0: #e8eaf2;
  --color-surface-tonal-a10: #dcdee5;
  --color-surface-tonal-a20: #d0d1d8;
  --color-surface-tonal-a30: #c4c5cb;
  --color-surface-tonal-a40: #b8b9be;
  --color-surface-tonal-a50: #adaeb1;

  /* Semantic colors (light theme) */
  --color-success-a0: #1b7f5c;
  --color-success-a10: #28be8a;
  --color-success-a20: #58dbad;

  --color-warning-a0: #b8871f;
  --color-warning-a10: #dfae44;
  --color-warning-a20: #ebca85;

  --color-danger-a-1: #8b2525;
  --color-danger-a0: #b13535;
  --color-danger-a10: #d06262;
  --color-danger-a20: #e29d9d;

  --color-info-a0: #1e56a3;
  --color-info-a10: #347ada;
  --color-info-a20: #74a4e6;

  /* Custom box shadows (light theme) */
  --shadow-focus-ring: 0 0 0 3px rgba(144, 170, 249, 0.2);
  --shadow-focus-ring-danger: 0 0 0 3px rgba(177, 53, 53, 0.1);
  --shadow-primary-glow: 0 0 0 2px rgba(144, 170, 249, 0.15);
  --shadow-warning-glow: 0 0 20px rgba(223, 172, 68, 0.6);
  --shadow-card-hover: 0 4px 12px rgba(0, 0, 0, 0.15);

  /* Primary button text color */
  --color-text-primary-a0: #131620;

  /* Legacy variables for backward compatibility */
  --clr-surface-a0: #ffffff;
  --clr-surface-a10: #f0f0f0;
  --clr-surface-a20: #e1e1e1;
  --clr-surface-a30: #d3d3d3;
  --clr-surface-a40: #c5c5c5;
  --clr-surface-a50: #b6b6b6;

  --clr-surface-tonal-a0: #f5f6ff;
  --clr-surface-tonal-a10: #e7e8f0;
  --clr-surface-tonal-a20: #dadbe1;
  --clr-surface-tonal-a30: #cccdd3;
  --clr-surface-tonal-a40: #bfc0c5;
  --clr-surface-tonal-a50: #b2b3b6;
}

@layer base {
	* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html,
  body {
    height: 100%;
    overflow: hidden;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Oxygen-Sans", Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
  }

  body {
    background-color: var(--color-surface-a0);
    color: var(--color-text-a0);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

@keyframes shake {
  0%,
  100% {
    transform: translateX(0);
  }
  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translateX(-4px);
  }
  20%,
  40%,
  60%,
  80% {
    transform: translateX(4px);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInOut {
  0% {
    opacity: 0;
    transform: translateX(-10px);
  }
  10% {
    opacity: 1;
    transform: translateX(0);
  }
  90% {
    opacity: 1;
    transform: translateX(0);
  }
  100% {
    opacity: 0;
    transform: translateX(-10px);
  }
}

@layer utilities {
  .scrollbar-custom {
    &::-webkit-scrollbar {
      width: 0.5rem;
    }

    &::-webkit-scrollbar-track {
      background: var(--color-surface-a10);
      border-radius: 0.25rem;
    }

    &::-webkit-scrollbar-thumb {
      background: var(--color-surface-a30);
      border-radius: 0.25rem;

      &:hover {
        background: var(--color-surface-a40);
      }
    }
  }

  .scrollbar-hide-on-idle {
    /* Hide scrollbar by default */
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */

    &::-webkit-scrollbar {
      width: 0.5rem;
      background: transparent;
    }

    &::-webkit-scrollbar-thumb {
      background: transparent;
      border-radius: 0.25rem;
      transition: background 0.2s ease;
    }

    /* Show scrollbar on hover */
    &:hover {
      scrollbar-width: thin; /* Firefox */

      &::-webkit-scrollbar {
        background: var(--color-surface-a10);
      }

      &::-webkit-scrollbar-thumb {
        background: var(--color-surface-a30);

        &:hover {
          background: var(--color-surface-a40);
        }
      }
    }

    /* Show scrollbar when scrolling */
    &.scrolling {
      scrollbar-width: thin; /* Firefox */

      &::-webkit-scrollbar {
        background: var(--color-surface-a10);
      }

      &::-webkit-scrollbar-thumb {
        background: var(--color-surface-a30);
      }
    }
  }

  .bg-primary {
    color: var(--clr-primary-a50);
    background-color: var(--clr-surface-a0);
  }
}
